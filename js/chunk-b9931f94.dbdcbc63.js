(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b9931f94"],{1799:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("nav",{staticClass:"d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination"},[s("li",{staticClass:"page-item",class:{disabled:!t.paginationProps.has_pre}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProductsModal(t.paginationProps.current_page-1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("«")])])]),t._l(t.paginationProps.total_pages,(function(a){return s("li",{key:a,staticClass:"page-item",class:{active:t.paginationProps.current_page===a}},[s("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(s){return s.preventDefault(),t.getProductsModal(a)}}},[t._v(t._s(a))])])})),s("li",{staticClass:"page-item",class:{disabled:!t.paginationProps.has_next}},[s("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProductsModal(t.paginationProps.current_page+1)}}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("»")])])])],2)])])},o=[],r={props:["paginationProps"],methods:{getProductsModal:function(t){this.$emit("getProductsEmit",t)}}},i=r,n=s("2877"),c=Object(n["a"])(i,e,o,!1,null,null,null);a["a"]=c.exports},4227:function(t,a,s){"use strict";var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",[s("div",{staticClass:"modal fade",attrs:{id:"SimuProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"SimuProductModalLabel","aria-hidden":"true","data-backdrop":"false","data-keyboard":"false"}},[s("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[s("div",{staticClass:"modal-content px-sm-5 text-secondary bg-primary-200"},[s("div",{staticClass:"modal-header pb-0 border-bottom-0"},[s("h5",{staticClass:"modal-title",attrs:{id:"SimuProductModalLabel"}},[t._v(t._s(t.ModalProductProps.title)+" "),s("i",{staticClass:"far fa-kiss-wink-heart text-danger"})]),t._m(0)]),s("div",{staticClass:"modal-body"},[s("img",{staticClass:"img-fluid",attrs:{src:t.ModalProductProps.imageUrl}}),s("blockquote",{staticClass:"blockquote mt-3"},[s("p",[t._v(t._s(t.ModalProductProps.content)),s("span",{staticClass:"badge badge-light text-secondary float-right",staticStyle:{"font-size":"50%"}},[t._v(t._s(t.ModalProductProps.category))])]),s("div",{staticClass:"clearfix"}),s("p"),s("footer",{staticClass:"d-flex justify-content-between"},[s("span",{staticClass:"h6 text-left"},[t._v("肚子餓～給我罐罐")]),s("span",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.ModalProductProps.description))])])]),s("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.ModalProductProps.price?t._e():s("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.ModalProductProps.origin_price))+" 元")]),t.ModalProductProps.price?s("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(t.ModalProductProps.origin_price))+" 元")]):t._e(),t.ModalProductProps.price?s("div",{staticClass:"h5 h3-sm"},[t._v("愛心價 "+t._s(t._f("currency")(t.ModalProductProps.price))+" 元")]):t._e()]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.ModalProductProps.num,expression:"ModalProductProps.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.$set(t.ModalProductProps,"num",a.target.multiple?s:s[0])}}},t._l(10,(function(a){return s("option",{key:a,domProps:{value:a}},[t._v("捐贈 "+t._s(a)+" 個罐頭")])})),0)]),s("div",{staticClass:"modal-footer border-top-0"},[s("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("小計"),s("strong",[t._v(t._s(t._f("currency")(t.ModalProductProps.num*t.ModalProductProps.price)))]),t._v("元")]),s("button",{staticClass:"btn btn-accent",attrs:{type:"button"},on:{click:function(a){return t.addToCartModal(t.ModalProductProps.id,t.ModalProductProps.num)}}},[t.loadingItemModal===t.ModalProductProps.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("加到愛心車")])])])])])])},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])}],r={props:["ModalProductProps","loadingItemModal"],methods:{addToCartModal:function(t,a){this.$emit("addToCartEmit",t,a)}}},i=r,n=(s("dfa6"),s("2877")),c=Object(n["a"])(i,e,o,!1,null,"102a8304",null);a["a"]=c.exports},dfa6:function(t,a,s){"use strict";var e=s("f066"),o=s.n(e);o.a},e0f2:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("section",[s("div",{staticClass:"row mt-4"},t._l(t.products,(function(a){return s("div",{key:a.id,staticClass:"col-md-4 mb-4"},[s("div",{staticClass:"card border-0 shadow-sm"},[s("div",{staticStyle:{height:"200px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}}),s("div",{staticClass:"card-body"},[s("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),s("h5",{staticClass:"card-title"},[s("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),s("p",{staticClass:"card-text"},[t._v(t._s(a.content))])]),s("div",{staticClass:"card-footer d-flex"},[s("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(s){return t.getProduct(a.id)}}},[t.status.loadingItem===a.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("查看更多")]),s("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(s){return t.addToCart(a.id)}}},[t.status.loadingItem===a.id?s("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("捐贈罐頭")])])])])})),0),s("Pagination",{attrs:{paginationProps:t.pagination},on:{getProductsEmit:t.getProducts}}),s("SimuProductModal",{attrs:{ModalProductProps:t.ModalProduct,loadingItemModal:t.status.loadingItem},on:{addToCartEmit:t.addToCart}}),t.cart.carts&&0!==t.cart.carts.length?s("div",{staticClass:"row justify-content-center my-5"},[s("div",{staticClass:"col-md-6"},[s("table",{staticClass:"table"},[t._m(0),s("tbody",t._l(t.cart.carts,(function(a){return s("tr",{key:a.id},[s("td",{staticClass:"align-middle"},[s("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(s){return t.removeCartItem(a.id)}}},[s("i",{staticClass:"far fa-trash-alt"})])]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.product.title)),a.coupon?s("div",{staticClass:"text-success font-italic font-weight-light"},[s("span",[t._v("已使用優惠劵")])]):t._e()]),s("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+" / 罐")]),s("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),0),s("tfoot",[0!==t.cart.total?s("tr",[s("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]):t._e(),t.cart.total!==t.cart.final_total?s("tr",[s("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),s("div",{staticClass:"input-group mb-3 input-group-sm"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入廠商優惠碼: xu428666"},domProps:{value:t.coupon_code},on:{input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:t.addCouponCode}},[t._v("套用優惠碼")])])])])]):t._e(),s("div",{staticClass:"my-5 row justify-content-center"},[s("form",{staticClass:"col-md-6",on:{submit:function(a){return a.preventDefault(),t.createOrder(a)}}},[s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useremail"}},[t._v("信箱")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{id:"useremail",type:"email",name:"email",placeholder:"請輸入信箱"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t.errors.has("email")?s("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"username"}},[t._v("捐贈人姓名")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{id:"username",type:"text",name:"name",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t.errors.has("name")?s("span",{staticClass:"text-danger"},[t._v("姓名必須輸入")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"usertel"}},[t._v("捐贈人電話")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{id:"usertel",type:"tel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("捐贈人地址")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{id:"useraddress",type:"address",name:"address",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t.errors.has("address")?s("span",{staticClass:"text-danger"},[t._v("地址欄位不得留空")]):t._e()]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("奴才留言")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"",cols:"30",rows:"10"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})]),t._m(1)])])],1)},o=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("thead",[s("tr",[s("th",{attrs:{width:"50"}}),s("th",[t._v("遛噠星人")]),s("th",{attrs:{width:"100"}},[t._v("數量")]),s("th",{attrs:{width:"90"}},[t._v("單價")])])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-accent"},[t._v("送出訂單")])])}],r=(s("99af"),s("4227")),i=s("1799"),n=s("1157"),c=s.n(n),l={data:function(){return{products:[],pagination:{},ModalProduct:{},status:{loadingItem:""},cart:{},coupon_code:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{Pagination:i["a"],SimuProductModal:r["a"]},methods:{getProducts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/products?page=").concat(t),s=this;s.$store.dispatch("uploading",!0),s.$http.get(a).then((function(t){s.$store.dispatch("uploading",!1),s.products=t.data.products,s.pagination=t.data.pagination}))},getProduct:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/product/").concat(t),s=this;s.status.loadingItem=t,s.$http.get(a).then((function(t){t.data.success?(s.status.loadingItem="",s.ModalProduct=t.data.product,c()("#SimuProductModal").modal("show")):(s.status.loadingItem="",s.$bus.$emit("message:push",t.data.message,"danger"))}))},addToCart:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/cart"),e=this,o={product_id:t,qty:a};e.status.loadingItem=t,e.$http.post(s,{data:o}).then((function(t){e.status.loadingItem="",e.getCart(),c()("#SimuProductModal").modal("hide")}))},getCart:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/cart"),a=this;a.$store.dispatch("uploading",!0),a.$http.get(t).then((function(t){a.$store.dispatch("uploading",!1),a.cart=t.data.data}))},removeCartItem:function(t){var a="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/cart/").concat(t),s=this;s.$http.delete(a).then((function(t){s.getCart()}))},addCouponCode:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/coupon"),a=this,s={code:a.coupon_code};a.$store.dispatch("uploading",!0),a.$http.post(t,{data:s}).then((function(t){a.getCart(),a.$store.dispatch("uploading",!1),t.data.success?a.$bus.$emit("message:push",t.data.message,"success"):a.$bus.$emit("message:push",t.data.message,"danger")}))},createOrder:function(){var t="".concat("https://vue-course-api.hexschool.io","/api/").concat("ccchelloworld","/order"),a=this,s=a.form;a.$validator.validate().then((function(e){e?a.$http.post(t,{data:s}).then((function(t){t.data.success?a.$router.push("/simulate_cus_checkout/".concat(t.data.orderId)):a.$bus.$emit("message:push",t.data.message,"danger")})):console.log("欄位不完整")}))}},created:function(){this.getProducts(),this.getCart()}},d=l,u=s("2877"),p=Object(u["a"])(d,e,o,!1,null,null,null);a["default"]=p.exports},f066:function(t,a,s){}}]);
//# sourceMappingURL=chunk-b9931f94.dbdcbc63.js.map